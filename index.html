<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#0b1220" />
  <title>Kurâ€™Ã¢n â€¢ ElmalÄ±lÄ± (PWA)</title>

  <link rel="manifest" href="./manifest.json" />
  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">Ù‚</div>
      <div class="brandtext">
        <div class="title">Kurâ€™Ã¢n</div>
        <div class="subtitle" id="subtitle">ElmalÄ±lÄ± â€¢ Offline</div>
      </div>
    </div>

    <div class="controls">
      <label class="field">
        <span>Meal</span>
        <select id="authorSelect" aria-label="Meal seÃ§"></select>
      </label>

      <label class="field">
        <span>Sure</span>
        <select id="surahSelect" aria-label="Sure seÃ§"></select>
      </label>

      <label class="field">
        <span>GÃ¶rÃ¼nÃ¼m</span>
        <select id="viewSelect" aria-label="GÃ¶rÃ¼nÃ¼m seÃ§">
          <option value="ayah">Ayet</option>
          <option value="page">Sayfa</option>
        </select>
      </label>

      <label class="field">
        <span>Ses Modu</span>
        <select id="audioMode" aria-label="Ses modu">
          <option value="ayah">Ayet (EveryAyah)</option>
          <option value="surah">Sure (AÃ§Ä±kKuran)</option>
        </select>
      </label>

      <label class="field">
        <span>KÃ¢ri</span>
        <div class="hstack">
          <input id="reciterSearch" class="mini" type="search" placeholder="KÃ¢ri araâ€¦" autocomplete="off" />
          <button class="btn ghost" id="btnFavReciter" title="KÃ¢riyi favorilere ekle/Ã§Ä±kar">â˜…</button>
        </div>
        <select id="reciterSelect" aria-label="KÃ¢ri seÃ§"></select>
      </label>

      <label class="field">
        <span>Yedek KÃ¢ri</span>
        <select id="fallbackReciter" aria-label="Yedek kÃ¢ri"></select>
      </label>

      <label class="field grow">
        <span>Arama</span>
        <input id="searchInput" type="search" placeholder="ArapÃ§a/TÃ¼rkÃ§e metinde ara..." autocomplete="off" />
      </label>

      <button class="btn" id="btnInstall" title="UygulamayÄ± yÃ¼kle" style="display:none">ğŸ“²</button>
      <button class="btn" id="btnAudioOffline" title="Ses offline (indir/temizle)">ğŸ§â¬‡</button>
      <button class="btn" id="btnDownload" title="Offline indirme (tÃ¼m sureler)">â¬‡</button>
      <button class="btn" id="btnBookmarks" title="Yer imleri">â˜…</button>
      <button class="btn" id="btnSettings" title="Ayarlar">âš™</button>
    </div>
  </header>

  <main class="main">
    <div class="status" id="status"></div>

    <section class="panel" id="panel">
      <div class="panelHeader">
        <div class="panelTitle" id="panelTitle">YÃ¼kleniyorâ€¦</div>
        <div class="panelActions">
          <button class="btn ghost" id="btnPrev" title="Ã–nceki">â†</button>
          <button class="btn ghost" id="btnNext" title="Sonraki">â†’</button>
        </div>
      </div>

      <div class="content" id="content" aria-live="polite"></div>
    </section>
  </main>

  <!-- Mini Player Bar -->
  <div class="player" id="player" role="region" aria-label="Sesli okuma">
    <div class="playerLeft">
      <button class="btn" id="btnPlayPause" title="Oynat/Duraklat">â–¶</button>
      <button class="btn ghost" id="btnStop" title="Durdur">â– </button>
      <button class="btn ghost" id="btnPrevAyah" title="Ã–nceki ayet">âŸ¨</button>
      <button class="btn ghost" id="btnNextAyah" title="Sonraki ayet">âŸ©</button>
    </div>
    <div class="playerMid">
      <div class="now" id="nowPlaying">HazÄ±r</div>
      <input id="seek" type="range" min="0" max="100" value="0" step="1" aria-label="Konum" />
    </div>
    <div class="playerRight">
      <button class="btn ghost" id="btnFollow" title="Okla takip">â¤</button>

      <div class="miniControls">
        <label class="miniLabel">HÄ±z</label>
        <select id="speedSelect" class="mini" aria-label="HÄ±z">
          <option value="0.75">0.75Ã—</option>
          <option value="1">1.0Ã—</option>
          <option value="1.25">1.25Ã—</option>
          <option value="1.5">1.5Ã—</option>
        </select>
      </div>

      <div class="miniControls">
        <label class="miniLabel">Tekrar</label>
        <select id="repeatSelect" class="mini" aria-label="Tekrar">
          <option value="1">1Ã—</option>
          <option value="2">2Ã—</option>
          <option value="3">3Ã—</option>
          <option value="5">5Ã—</option>
          <option value="10">10Ã—</option>
        </select>
      </div>

      <label class="field" style="margin:0">
        <span style="display:none">Ses</span>
        <input id="volume" type="range" min="0" max="1" step="0.01" value="0.9" aria-label="Ses" />
      </label>
    </div>
  </div>

  <!-- Ses Offline Modal -->
  <dialog class="modal" id="dlgAudio">
    <form method="dialog" class="modalCard">
      <div class="modalHeader">
        <h3>Ses Offline</h3>
        <button class="btn" value="cancel" aria-label="Kapat">âœ•</button>
      </div>
      <div class="modalBody">
        <div class="hint">
          Ayet mp3 (EveryAyah) dosyalarÄ±nÄ± cihazda saklayÄ±p internet olmadan dinleyebilirsiniz. Boyut bÃ¼yÃ¼k olabilir.
        </div>

        <label class="field" style="margin-top:12px">
          <span>Ä°ndirilecek Ses KÃ¢risi</span>
          <select id="audioCacheReciter" aria-label="Ses kÃ¢risi"></select>
        </label>

        <div class="hstack" style="margin-top:10px; flex-wrap:wrap">
          <button class="btn" id="btnCacheThisSurah" type="button">SeÃ§ili Sureyi Ä°ndir</button>
          <button class="btn ghost" id="btnCancelAudioDownload" type="button" style="display:none">Ä°ndirmeyi Ä°ptal Et</button>
          <button class="btn ghost" id="btnClearAudioCache" type="button">Ses Ã–nbelleÄŸini Temizle</button>
        </div>

        <div class="progressWrap" style="margin-top:12px">
          <div class="progressBar" id="audioProgressBar"></div>
        </div>
        <div class="hint" id="audioProgressText" style="margin-top:8px"></div>
        <div class="hint" id="audioCacheStats" style="margin-top:6px"></div>
      </div>
      <div class="modalFooter">
        <button class="btn" value="ok">Kapat</button>
      </div>
    </form>
  </dialog>

  <!-- Yer imleri -->
  <dialog class="modal" id="dlgBookmarks">
    <form method="dialog" class="modalCard">
      <div class="modalHeader">
        <h3>Yer Ä°mleri</h3>
        <button class="btn" value="cancel" aria-label="Kapat">âœ•</button>
      </div>
      <div class="modalBody" id="bookmarkList"></div>
      <div class="modalFooter">
        <button class="btn ghost" id="btnClearBookmarks" type="button">TÃ¼mÃ¼nÃ¼ Temizle</button>
        <button class="btn" value="ok">Kapat</button>
      </div>
    </form>
  </dialog>

  <!-- Ayarlar -->
  <dialog class="modal" id="dlgSettings">
    <form method="dialog" class="modalCard">
      <div class="modalHeader">
        <h3>Ayarlar</h3>
        <button class="btn" value="cancel" aria-label="Kapat">âœ•</button>
      </div>

      <div class="modalBody">
        <label class="field">
          <span>YazÄ± Boyutu</span>
          <input id="fontSize" type="range" min="16" max="34" step="1" />
        </label>

        <label class="field">
          <span>SatÄ±r AralÄ±ÄŸÄ±</span>
          <input id="lineHeight" type="range" min="1.3" max="2.6" step="0.1" />
        </label>

        <label class="check">
          <input id="showPageNums" type="checkbox" />
          <span>Sayfa numaralarÄ±nÄ± gÃ¶ster</span>
        </label>

        <label class="check">
          <input id="showArabic" type="checkbox" />
          <span>ArapÃ§a metni gÃ¶ster</span>
        </label>

        <label class="check">
          <input id="showTranslation" type="checkbox" />
          <span>TÃ¼rkÃ§e meali gÃ¶ster</span>
        </label>

        <label class="check">
          <input id="inlineMode" type="checkbox" />
          <span>ArapÃ§a + meal aynÄ± satÄ±r (yan yana)</span>
        </label>

        <label class="check">
          <input id="tajweed" type="checkbox" />
          <span>Tecvid renklendirme (veri varsa)</span>
        </label>

        <label class="check">
          <input id="autoResume" type="checkbox" />
          <span>KaldÄ±ÄŸÄ±n yeri otomatik hatÄ±rla</span>
        </label>

        <hr class="sep" />
        <div class="sectionTitle">Ses: Fallback (yedek kÃ¢ri sÄ±rasÄ±)</div>

        <label class="check">
          <input id="includeFavFallback" type="checkbox" />
          <span>Fallback sÄ±rasÄ±nda favorileri de dene</span>
        </label>

        <label class="check">
          <input id="includeDefaultFallback" type="checkbox" />
          <span>En sonda varsayÄ±lan gÃ¼venilir kÃ¢rileri dene</span>
        </label>

        <label class="field">
          <span>Fallback #1 (birincil yedek)</span>
          <select id="fallback1" aria-label="Fallback 1"></select>
        </label>

        <label class="field">
          <span>Fallback #2</span>
          <select id="fallback2" aria-label="Fallback 2"></select>
        </label>

        <label class="field">
          <span>Fallback #3</span>
          <select id="fallback3" aria-label="Fallback 3"></select>
        </label>

        <div class="hint">
          Tecvid renklendirme iÃ§in (isteÄŸe baÄŸlÄ±) <code>data/quran-uthmani.txt</code> ve <code>data/tajweed.hafs.uthmani-pause-sajdah.json</code> dosyalarÄ±nÄ± ekleyebilirsiniz.
        </div>
      </div>

      <div class="modalFooter">
        <button class="btn" value="ok">Kapat</button>
      </div>
    </form>
  </dialog>

  <!-- Not Ekle -->
  <dialog class="modal" id="dlgNote">
    <form method="dialog" class="modalCard">
      <div class="modalHeader">
        <h3 id="noteTitle">Not</h3>
        <button class="btn" value="cancel" aria-label="Kapat">âœ•</button>
      </div>

      <div class="modalBody">
        <textarea id="noteText" rows="6" placeholder="Bu ayet iÃ§in not..."></textarea>
      </div>

      <div class="modalFooter">
        <button class="btn ghost" id="btnDeleteNote" type="button">Notu Sil</button>
        <button class="btn" id="btnSaveNote" value="ok">Kaydet</button>
      </div>
    </form>
  </dialog>

  <audio id="audio" preload="none"></audio>
  <script defer src="./app.js"></script>
</body>
</html>
